<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link href="css/style.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,900" rel="stylesheet" />
    <meta property="og:image" content="image/sharing_cover.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="450" />
    <meta property="og:image:height" content="600" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ruby Annotations</title>
    <style>
    .code-ruby {
        font-size: 6pt;
    }

    .ruby-grow-on-hover:hover rt {
        font-size: 12pt;
    }
    </style>
</head>


<!-- HI INSPECTOR! THIS PAGE IS FOR HTML.ENERGY -->

<body>
<main>
<h1>Ruby Annotations</h1>
<p>The <code>&lt;ruby&gt;</code> element can be used to add annotations to text. It is most commonly used for showing pronunciation of East Asian characters. However, perhaps we could use it for other things too?</p>
<p>It could be useful for translations:</p>
<figure>
<blockquote lang="la">
    <ruby>veni<rp>(</rp><rt lang="en">I came</rt><rp>)</rp>, vidi<rp>(</rp><rt lang="en">I saw</rt><rp>)</rp>, vici<rp>(</rp><rt lang="en">I conquered</rt><rp>)</rp></ruby>
</blockquote>
<figcaption><cite>Julius Caesar</cite></figcaption>
</figure>
<br />
<p>Perhaps we could use it for annotating code:</p>
<figure>
<pre>
<code>
float Q_rsqrt( float number )
{
    long i;
    float x2, y;
    const float threehalfs = 1.5F;

    x2 = number * 0.5F;
    y  = number;
    <ruby>i  = * ( long * ) &y;<rp>/*</rp><rt class="code-ruby">reinterprets bits of the float as a long</rt><rp>*/</rp></ruby>                       // evil floating point bit level hacking
    <ruby>i  = 0x5f3759df - ( i >> 1 );<rp>/*</rp><rt class="code-ruby">abuses floating point w/ bitwise operations</rt><rp>*/</rp></ruby>               // what the fuck?
    <ruby>y  = * ( float * ) &i;<rp>/*</rp><rt class="code-ruby">reinterprets bits back to a float</rt><rp>*/</rp></ruby>
    y  = y * ( threehalfs - ( x2 * y * y ) );   // 1st iteration
//	y  = y * ( threehalfs - ( x2 * y * y ) );   // 2nd iteration, this can be removed

    return y;
}
</code>
</pre>
<figcaption>Fast inverse square root (from <cite>Quake III</cite>), annotated with ruby</figcaption>
</figure>
<br />
<p>This is cool, but it's not overly readable, even with the font size bumped up a little. Perhaps we can use CSS to improve it?</p>
<figure>
<pre>
<code>
    <ruby class="ruby-grow-on-hover">i  = * ( long * ) &y;<rp>/*</rp><rt class="code-ruby">reinterprets bits of the float as a long</rt><rp>*/</rp></ruby>                       // evil floating point bit level hacking
    <ruby class="ruby-grow-on-hover">i  = 0x5f3759df - ( i >> 1 );<rp>/*</rp><rt class="code-ruby">abuses floating point w/ bitwise operations</rt><rp>*/</rp></ruby>               // what the fuck?
    <ruby class="ruby-grow-on-hover">y  = * ( float * ) &i;<rp>/*</rp><rt class="code-ruby">reinterprets bits back to a float</rt><rp>*/</rp></ruby>
</code>
</pre>
<figcaption>Code (from <cite>Quake III</cite>), annotated with ruby that <em>grows on hover!</em></figcaption>
</figure>
<p>Or, instead of growing the ruby itself, maybe we could <em>expand</em>it to show more details:</p>
<figure>
<pre><code>
    <ruby>This is some very confusing text<rp>(</rp><rt><details><summary>Brief explanatio</summary><p>This is a longer explanation, with more detail ðŸ˜€</p></details></rt><rp>)</rp>/ruby>
</code></pre>
</figure>
</main>
</body>

<script>
</script>

</html>
